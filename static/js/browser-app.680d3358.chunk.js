(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[3],{1278:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return O}));var r=n(9),o=n(8),a=n(13),i=n(14),c=n(1),s=n(2225),u=n(2226),l=n(2227),d=n(588),p=n(508),f=n.n(p),b=n(961),h=n(853),j=n(2228),g=n(35),v=n(6),x=e.gd,m=0,w=function(e,t,n){var r=e.getGameResolutionWidth(),o=e.getGameResolutionHeight(),a=window.screenX+window.innerWidth/2-r/2,i=window.screenY+window.innerHeight/2-o/2,c=n||"GDevelopPreview"+m++;return{previewWindow:window.open(t,c,"width=".concat(r,",height=").concat(o,",left=").concat(a,",top=").concat(i)),targetId:c}},O=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).canDoNetworkPreview=function(){return!1},e.canDoHotReload=function(){return!1},e.state={previewLinkDialog:null,error:null},e._prepareExporter=function(){return Object(d.a)("preview").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=Object(h.a)(),o=Object(b.a)()+r,a=new l.a({filesContent:n,bucketBaseUrl:Object(b.a)(),prefix:r}),i=f()(new x.AbstractFileSystemJS,a),c=new x.Exporter(i,t);return c.setCodeOutputDirectory(o),{exporter:c,outputDir:o,browserS3FileSystem:a}}))},e.launchPreview=function(t){var n=t.project,r=t.layout,o=t.externalLayout;return e.setState({error:null}),e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(a){var i=a.exporter,c=a.outputDir,s=a.browserS3FileSystem,u=new x.PreviewExportOptions(n,c);u.setLayoutName(r.getName()),u.setIsDevelopmentEnvironment(g.b.isDev()),o&&u.setExternalLayoutName(o.getName()),u.useWindowMessageDebuggerClient();var l=e.getPreviewDebuggerServer().getExistingDebuggerIds(),d=l.length?l[l.length-1]:null,p=t.hotReload&&null!==d;return u.setNonRuntimeScriptsCacheBurst(Date.now()),u.setFullLoadingScreen(t.fullLoadingScreen),i.exportProjectForPixiPreview(u),u.delete(),i.delete(),s.uploadPendingObjects().then((function(){var t=c+"/index.html",r=w(n,t,p?Object(j.b)(d):null),o=r.previewWindow,a=r.targetId;o?Object(j.c)({previewWindow:o,targetId:a}):e.setState({previewLinkDialog:{project:n,url:t}})}))})).catch((function(t){e.setState({error:t})}))},e}return Object(o.a)(n,[{key:"getPreviewDebuggerServer",value:function(){return j.a}},{key:"render",value:function(){var e=this,t=this.state,n=t.previewLinkDialog,r=t.error;return r?Object(v.jsx)(u.a,{error:r,onClose:function(){return e.setState({error:null})}}):n?Object(v.jsx)(s.a,{url:n.url,project:n.project,onPreviewWindowOpened:function(e){var t=e.previewWindow,n=e.targetId;Object(j.c)({previewWindow:t,targetId:n})},onClose:function(){return e.setState({previewLinkDialog:null})}}):null}}]),n}(c.Component)}).call(this,n(29))},2225:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(9),o=n(8),a=n(13),i=n(14),c=n(12),s=n(1),u=n(99),l=(n(61),n(23)),d=n(465),p=n(1278),f=n(6),b=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._makeOnOpen=function(t){return function(){var t=Object(p.b)(e.props.project,e.props.url,null),n=t.previewWindow,r=t.targetId;e.props.onPreviewWindowOpened({previewWindow:n,targetId:r}),e.props.onClose()}},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return this.props.url?Object(f.jsx)(c.I18n,{children:function(t){var n=t.i18n;return Object(f.jsxs)(u.b,{actions:[Object(f.jsx)(u.a,{label:Object(f.jsx)(c.Trans,{id:"Launch the preview"}),primary:!0,onClick:e._makeOnOpen(n)},"launch-preview")],onRequestClose:e.props.onClose,onApply:e._makeOnOpen(n),open:!0,children:[Object(f.jsx)(l.c,{children:Object(f.jsx)(l.a,{children:Object(f.jsx)(d.a,{children:Object(f.jsx)(c.Trans,{id:"Your preview is ready! Click on the button to launch the preview."})})})}),Object(f.jsx)(l.c,{children:Object(f.jsx)(l.a,{children:Object(f.jsx)(d.a,{children:Object(f.jsx)(c.Trans,{id:"To skip this dialog and <0>directly open the preview next time</0>, please allow popups to be opened for this website in your browser.",components:[Object(f.jsx)("b",{})]})})})})]})}}):null}}]),n}(s.Component)},2226:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(9),o=n(8),a=n(13),i=n(14),c=n(12),s=n(1),u=n(99),l=n(136),d=n(23),p=n(465),f=n(6),b=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.onClose;return Object(f.jsx)(c.I18n,{children:function(e){e.i18n;return Object(f.jsxs)(u.b,{actions:[Object(f.jsx)(l.a,{label:Object(f.jsx)(c.Trans,{id:"Close"}),onClick:n},"close")],title:Object(f.jsx)(c.Trans,{id:"Could not launch the preview"}),onRequestClose:n,open:!0,children:[Object(f.jsx)(d.c,{children:Object(f.jsx)(d.a,{children:Object(f.jsx)(p.a,{children:"NetworkingError"===t.code?Object(f.jsx)(c.Trans,{id:"The preview could not be launched because you're offline."}):Object(f.jsx)(c.Trans,{id:"The preview could not be launched because an error happened: {0}.",values:{0:t.message}})})})}),Object(f.jsx)(d.c,{children:Object(f.jsx)(d.a,{children:Object(f.jsx)(p.a,{children:Object(f.jsx)(c.Trans,{id:"Make sure you're online, have a proper internet connection and try again. If you download and use GDevelop desktop application, you can also run previews without any internet connection."})})})})]})}})}}]),n}(s.Component)},2227:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(8),o=n(9),a=n(146),i=n.n(a),c=n(961),s=e.gd,u=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},l=Object(r.a)((function e(t){var n=this,r=t.filesContent,a=t.prefix,l=t.bucketBaseUrl;Object(o.a)(this,e),this._pendingUploadObjects=[],this._allCopiedExternalUrls=new Set,this.uploadPendingObjects=function(){return Promise.all(n._pendingUploadObjects.map(c.b)).then((function(e){console.log("Uploaded all objects:",e),n._pendingUploadObjects=[]}),(function(e){throw console.error("Can't upload all objects:",e),e}))},this.mkDir=function(e){},this.dirExists=function(e){return!0},this.clearDir=function(e){},this.getTempDir=function(){return"/virtual-unused-tmp-dir"},this.fileNameFrom=function(e){return u(e)?e:i.a.basename(e)},this.dirNameFrom=function(e){return u(e)?"":i.a.dirname(e)},this.makeAbsolute=function(e,t){return u(e)?e:(n.isAbsolute(t)||(t=i.a.resolve(t)),i.a.resolve(t,i.a.normalize(e)))},this.makeRelative=function(e,t){return u(e)?e:i.a.relative(t,i.a.normalize(e))},this.isAbsolute=function(e){return!!u(e)||(0===e.length||(e.length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},this.copyFile=function(e,t){return u(e)?(n._allCopiedExternalUrls.add(e),!0):(console.warn("Copy not done from",e,"to",t),!0)},this.writeToFile=function(e,t){var r=e.replace(n.bucketBaseUrl,""),o=i.a.extname(e);return n._pendingUploadObjects.push({Key:r,Body:t,ContentType:{".js":"text/javascript",".html":"text/html"}[o]}),!0},this.readFile=function(e){return n._indexedFilesContent[e]?n._indexedFilesContent[e].text:(console.error("Unknown file ".concat(e,", returning an empty string")),"")},this.readDir=function(e,t){t=t.toUpperCase();var r=new s.VectorString;return n._allCopiedExternalUrls.forEach((function(e){var n=e.toUpperCase();n.indexOf(t)===n.length-t.length&&r.push_back(e)})),r},this.fileExists=function(e){return u(e),!0},this.prefix=a,this.bucketBaseUrl=l,this._indexedFilesContent={},r.forEach((function(e){n._indexedFilesContent[e.filePath]=e}))}))}).call(this,n(29))},2228:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return g}));var r=n(3),o=n(0),a=n.n(o),i="stopped",c=[],s=0,u={},l=function(){return Object.keys(u).map((function(e){return Number(e)}))},d=function(e){for(var t in u){var n=Number(t);if(u[n].previewWindow===e)return n}return null},p=null,f=function(){null===p&&(p=setInterval((function(){var e=function(e){var t=Number(e);u[t].previewWindow.closed&&(console.info("A preview window was closed, with debugger id:",t),delete u[t],c.forEach((function(e){return(0,e.onConnectionClosed)({id:t,debuggerIds:l()})})),Object.keys(u).length||(clearInterval(p),p=null))};for(var t in u)e(t)}),1e3))},b="https://game-previews.gdevelop.io",h={startServer:function(){var e=Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("started"!==i){e.next=2;break}return e.abrupt("return");case 2:i="started",window.addEventListener("message",(function(e){if(e.origin===b){var t=d(e.source);if(null!==t)try{var n=JSON.parse(e.data);c.forEach((function(e){return(0,e.onHandleParsedMessage)({id:t,parsedMessage:n})}))}catch(r){console.error("Error while parsing messages coming from a preview:",r)}}})),f(),c.forEach((function(e){return(0,e.onServerStateChanged)()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendMessage:function(e,t){var n=u[e].previewWindow;if(n)try{n.postMessage(t,b)}catch(r){console.error("Unable to send a message to the preview window:",r)}},getServerState:function(){return i},getExistingDebuggerIds:l,registerCallbacks:function(e){return c.push(e),function(){var t=c.indexOf(e);-1!==t&&c.splice(t,1)}}},j=function(e){var t=e.previewWindow,n=e.targetId,r=s++,o=d(t);null!==o&&delete u[o],u[r]={previewWindow:t,targetId:n},f(),c.forEach((function(e){return(0,e.onConnectionOpened)({id:r,debuggerIds:l()})}))},g=function(e){if(null==e)return null;var t=u[e];return t?t.targetId:null}},2229:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(4),o=n(12),a=(n(1),n(508)),i=n.n(a),c=n(522),s=n(962),u=n(588),l=n(621),d=n(589),p=n(801),f=n(6),b=e.gd,h={name:"browser-online-cordova",onlineBuildType:"cordova-build",limitedBuilds:!0,packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(e,t,n){return t||""===n},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(f.jsx)(p.a,Object(r.a)({},e))},renderLaunchButtonLabel:function(){return Object(f.jsx)(o.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(u.a)("cordova").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new l.a({textFiles:n}),o=i()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,a=e.project,i=new b.MapStringBoolean;return i.set("exportForCordova",!0),n.exportWholePixiProject(a,r,i),i.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(d.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(d.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},launchUpload:function(e,t){return Object(c.g)().then((function(n){return Object(s.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r,o){var a=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(c.a)(a,i.uid,n,e.targets,e.keystore,r,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(29))},2230:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(4),o=n(12),a=(n(1),n(508)),i=n.n(a),c=n(522),s=n(962),u=n(588),l=n(621),d=n(589),p=n(802),f=n(6),b=e.gd,h={name:"browser-online-electron",onlineBuildType:"electron-build",limitedBuilds:!0,packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e,t,n){return!!e.targets.length&&(t||""===n)},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(f.jsx)(p.a,Object(r.a)({},e))},renderLaunchButtonLabel:function(){return Object(f.jsx)(o.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.a)("electron").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new l.a({textFiles:n}),o=i()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,a=e.project,i=new b.MapStringBoolean;return i.set("exportForElectron",!0),n.exportWholePixiProject(a,r,i),i.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(d.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(d.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},launchUpload:function(e,t){return Object(c.g)().then((function(n){return Object(s.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r,o){var a=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(c.b)(a,i.uid,n,e.targets,r,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(29))},2231:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(12),o=(n(1),n(508)),a=n.n(o),i=n(522),c=n(962),s=n(588),u=n(621),l=n(589),d=n(806),p=n(6),f=e.gd,b={name:"browser-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(e,t,n){return t||""===n||"done"===n},isNavigationDisabled:function(e,t){return!t&&!["","done"].includes(e)},renderHeader:function(){return Object(p.jsx)(d.a,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Generate link"})},renderCustomStepsProgress:function(e){var t=e.build,n=e.project,r=e.onSaveProject,o=e.errored,a=e.exportStep;return Object(p.jsx)(d.b,{build:t,project:n,onSaveProject:r,errored:o,exportStep:a})},prepareExporter:function(e){return Object(s.a)("web").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new u.a({textFiles:n}),o=a()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,a=e.project,i=new f.MapStringBoolean;return n.exportWholePixiProject(a,r,i),i.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(l.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(l.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress,sizeLimit:25e7})},launchUpload:function(e,t){return Object(i.g)().then((function(n){return Object(c.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r,o){var a=t.getAuthorizationHeader,c=t.firebaseUser;return c?Object(i.c)(a,c.uid,n,r,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(29))},2232:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(12),o=(n(1),n(508)),a=n.n(o),i=n(588),c=n(621),s=n(589),u=n(137),l=n(709),d=n(804),p=n(6),f=e.gd,b={name:"browser-html5",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(i.a)("web").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new c.a({textFiles:n}),o=a()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,a=e.project,i=new f.MapStringBoolean;return n.exportWholePixiProject(a,r,i),i.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(s.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(s.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(l.b)(e,"game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(29))},2233:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(12),o=(n(1),n(508)),a=n.n(o),i=n(588),c=n(621),s=n(589),u=n(137),l=n(709),d=n(797),p=n(6),f=e.gd,b={name:"browser-cordova",packageNameWarningType:"mobile",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(i.a)("cordova").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new c.a({textFiles:n}),o=a()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,a=e.project,i=new f.MapStringBoolean;return i.set("exportForCordova",!0),n.exportWholePixiProject(a,r,i),i.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(s.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(s.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(l.b)(e,"game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(29))},2234:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(12),o=(n(1),n(508)),a=n.n(o),i=n(588),c=n(621),s=n(589),u=n(137),l=n(709),d=n(798),p=n(6),f=e.gd,b={name:"browser-electron",packageNameWarningType:"desktop",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(i.a)("electron").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new c.a({textFiles:n}),o=a()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,a=e.project,i=new f.MapStringBoolean;return i.set("exportForElectron",!0),n.exportWholePixiProject(a,r,i),i.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(s.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(s.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(l.b)(e,"game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(29))},2235:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(12),o=(n(1),n(508)),a=n.n(o),i=n(588),c=n(621),s=n(589),u=n(137),l=n(709),d=n(800),p=n(6),f=e.gd,b={name:"browser-facebook-instant-games",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(i.a)("facebook-instant-games").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new c.a({textFiles:n}),o=a()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t){var n=t.exporter,r=t.outputDir,o=t.abstractFileSystem,a=e.project,i=new f.MapStringBoolean;return i.set("exportForFacebookInstantGames",!0),n.exportWholePixiProject(a,r,i),i.delete(),n.delete(),Promise.resolve({textFiles:o.getAllTextFilesIn(r),urlFiles:o.getAllUrlFilesIn(r)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(s.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(s.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{primary:!0,onClick:function(){return Object(l.b)(e,"fb-instant-game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the Instant Game archive"})})}})}})}}}).call(this,n(29))},2236:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(1272),o=(n(708),n(530),e.gd),a=[{name:"AdMob",extensionModule:n(2237),objectsRenderingServiceModules:{}},{name:"AdvancedWindow",extensionModule:n(2238),objectsRenderingServiceModules:{}},{name:"FacebookInstantGames",extensionModule:n(2239),objectsRenderingServiceModules:{}},{name:"DeviceSensors",extensionModule:n(2240),objectsRenderingServiceModules:{}},{name:"DeviceVibration",extensionModule:n(2241),objectsRenderingServiceModules:{}},{name:"DebuggerTools",extensionModule:n(2242),objectsRenderingServiceModules:{}},{name:"Physics2",extensionModule:n(2243),objectsRenderingServiceModules:{}},{name:"ExampleJsExtension",extensionModule:n(2244),objectsRenderingServiceModules:{}},{name:"Tween",extensionModule:n(2245),objectsRenderingServiceModules:{}},{name:"Video",extensionModule:n(2246),objectsRenderingServiceModules:{}},{name:"FileSystem",extensionModule:n(2247),objectsRenderingServiceModules:{}},{name:"Firebase",extensionModule:n(2248),objectsRenderingServiceModules:{}},{name:"Leaderboards",extensionModule:n(2249),objectsRenderingServiceModules:{}},{name:"PlayerAuthentication",extensionModule:n(2250),objectsRenderingServiceModules:{}},{name:"DialogueTree",extensionModule:n(2251),objectsRenderingServiceModules:{}},{name:"BBText",extensionModule:n(2252),objectsRenderingServiceModules:{"pixi-multistyle-text/dist/pixi-multistyle-text.umd":n(2253)}},{name:"TileMap",extensionModule:n(2254),objectsRenderingServiceModules:{"pixi-tilemap/dist/pixi-tilemap.umd":n(2255),"helper/TileMapHelper":n(2258),"pako/dist/pako.min":n(2259)}},{name:"Effects",extensionModule:n(2260),objectsRenderingServiceModules:{}},{name:"P2P",extensionModule:n(2261),objectsRenderingServiceModules:{}},{name:"Lighting",extensionModule:n(2262),objectsRenderingServiceModules:{}},{name:"SpatialSound",extensionModule:n(2263),objectsRenderingServiceModules:{}},{name:"BitmapText",extensionModule:n(2264),objectsRenderingServiceModules:{}},{name:"Screenshot",extensionModule:n(2265),objectsRenderingServiceModules:{}},{name:"TextInput",extensionModule:n(2266),objectsRenderingServiceModules:{}}];function i(e){var t=e.objectsEditorService,n=e.objectsRenderingService,i=e.filterExamples;return{loadAllExtensions:function(e){return Promise.resolve(a.filter((function(e){var t=e.name;return!i||!t.includes("Example")})).map((function(a){var i=a.name,c=a.extensionModule,s=a.objectsRenderingServiceModules;if(t&&c.registerEditorConfigurations&&c.registerEditorConfigurations(t),n&&s)for(var u in s)n.registerModule(u,s[u]);return n&&c.registerInstanceRenderers&&c.registerInstanceRenderers(n),{extensionModulePath:"internal-extension://"+i,result:Object(r.loadExtension)(e,o,o.JsPlatform.get(),c)}})))}}}}).call(this,n(29))},2267:function(e,t,n){"use strict";var r=n(4),o=n(1),a=n.n(o),i=n(986),c=n(6);t.a=a.a.memo((function(e){return Object(c.jsx)(i.a,Object(r.a)(Object(r.a)({},e),{},{children:Object(c.jsx)("path",{d:"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z"})}))}))},2268:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return N}));var r=n(4),o=n(30),a=n(3),i=n(0),c=n.n(i),s=n(12),u=n(1),l=n(99),d=n(136),p=n(137),f=n(23),b=n(79),h=n(35),j=n(709),g=n(481),v=n(497),x=n(61),m=n(465),w=n(964),O=n(959),y=n(651),S=n(573),F=n(589),k=n(146),P=n.n(k),C=n(487),R=n(6),E=e.gd,D="game.json",T=P.a.posix||P.a,M=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,o,a,i,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.onAddBlobFile,o=t.onProgress,a={erroredResources:[]},i=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().map((function(e){var n,r=t.getResource(e),o=r.getFile();return(n=o).startsWith("http://")||n.startsWith("https://")||n.startsWith("ftp://")||n.startsWith("blob:")||n.startsWith("data:")?Object(y.b)(o)?{resource:r,url:o,filename:Object(S.g)(o)}:null:(a.erroredResources.push({resourceName:r.getName(),error:new Error("Unsupported relative file when downloading a copy.")}),null)})).filter(Boolean)},s=i(n),e.next=6,Object(w.a)({urlContainers:s,onProgress:function(e,t){o(e,2*t)}});case 6:return u=e.sent,l=new Set([D]),u.forEach((function(e){var t=e.item,n=e.error,o=e.blob,i=t.resource,c=t.filename;if(!n&&o){var s=T.extname(c),u=T.basename(c,s),d="assets/"+i.getKind(),p=Object(C.a)(u,(function(e){return l.has(T.join(d,e+s))})),f=T.join(d,p+s);l.add(f),i.setFile(f),r({blob:o,filePath:f})}else a.erroredResources.push({resourceName:i.getName(),error:n||new Error("Unknown error during download.")})})),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function N(e){var t=e.project,n=e.onDone,i=u.useState(null),w=Object(o.a)(i,2),y=w[0],S=w[1],k=Object(O.a)({onDoProcess:u.useCallback((function(e,t){return M(Object(r.a)(Object(r.a)({},e),{},{onProgress:t}))}),[])}),P=k.ensureProcessIsDone,C=k.renderProcessDialog;return u.useEffect((function(){return Object(a.a)(c.a.mark((function e(){var n,r,o,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(null),n=E.ProjectHelper.createNewGDJSProject(),e.prev=2,r=new E.SerializerElement,t.serializeTo(r),n.unserializeFrom(r),r.delete(),o=[],a=[],e.next=11,P({project:n,onAddBlobFile:function(e){o.push(e)}});case 11:return a.push({text:JSON.stringify(Object(v.b)(n)),filePath:D}),e.next=14,Object(F.a)({textFiles:a,blobFiles:o,basePath:"/",onProgress:function(e,t){}});case 14:i=e.sent,S(i),e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(2),Object(x.a)({message:"Unable to save your project because of an internal error.",rawError:e.t0,errorId:"download-file-save-as-dialog-error"}),e.abrupt("return");case 22:return e.prev=22,n.delete(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[2,18,22,25]])})))(),function(){return S(null)}}),[t,P]),Object(R.jsxs)(l.b,{actions:[Object(R.jsx)(d.a,{label:Object(R.jsx)(s.Trans,{id:"Download GDevelop desktop version"}),primary:!1,onClick:function(){return h.b.openExternalURL("http://gdevelop.io")}},"download"),Object(R.jsx)(d.a,{label:Object(R.jsx)(s.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],onRequestClose:n,open:!0,maxWidth:"sm",title:Object(R.jsx)(s.Trans,{id:"Download a copy"}),children:[Object(R.jsxs)(b.a,{noMargin:!0,children:[Object(R.jsx)(m.a,{children:Object(R.jsx)(s.Trans,{id:"You can download the file of your game to continue working on it using the full GDevelop version:"})}),Object(R.jsx)(f.c,{noMargin:!0,expand:!0,justifyContent:"center",children:y?Object(R.jsx)(j.a,{blob:y,children:function(e){return Object(R.jsx)(p.a,{primary:!0,onClick:function(){return Object(j.b)(e,"gdevelop-game.zip")},label:Object(R.jsx)(s.Trans,{id:"Download the compressed game and resources"})})}}):Object(R.jsx)(g.a,{})})]}),C()]})}}).call(this,n(29))},2270:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(3),o=n(0),a=n.n(o),i=n(620),c=n(649),s=n(80),u=n(61),l=e.gd,d=function(){var e=Object(r.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.i18n,n=t.settings,Object(s.q)({exampleUrl:"",exampleSlug:""}),r=n.projectName,o=l.ProjectHelper.createNewGDJSProject(),e.abrupt("return",{source:{project:o,projectName:r,storageProvider:null,fileMetadata:null},destination:null});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(r.a)(a.a.mark((function e(t){var n,r,o,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.i18n,r=t.exampleShortHeader,o=t.settings,e.prev=1,l=o.projectName,e.next=5,Object(c.a)(r);case 5:return d=e.sent,Object(s.q)({exampleUrl:d.projectFileUrl,exampleSlug:r.slug}),e.abrupt("return",{source:{project:null,projectName:l,storageProvider:i.a,fileMetadata:{fileIdentifier:d.projectFileUrl}},destination:null});case 10:return e.prev=10,e.t0=e.catch(1),Object(u.a)({message:n._({id:"Unable to fetch the example."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"browser-example-load-error"}),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()}).call(this,n(29))},2415:function(e,t,n){"use strict";var r=n(30),o=n(12),a=n(1),i=n(99),c=n(136),s=n(23),u=n(4),l=n(137),d=n(471),p=n(6),f={container:{position:"relative",display:"flex",alignItems:"baseline",width:"100%"},button:{marginLeft:10},textField:{flex:1}},b=function(e){return Object(p.jsxs)("div",{style:Object(u.a)({},f.container),children:[Object(p.jsx)(d.b,{style:f.textField,floatingLabelText:e.floatingLabelText,floatingLabelFixed:!0,type:"text",translatableHintText:{id:"Choose a file or folder"},value:e.value?e.value.name:"",onChange:function(){}}),Object(p.jsx)(l.a,{label:Object(p.jsx)(o.Trans,{id:"Choose..."}),primary:!0,style:f.button,onClick:e.onOpenPicker})]})},h=n(568),j=n(478);t.a=function(e){var t=a.useState(null),n=Object(r.a)(t,2),u=n[0],l=n[1],f=a.useState(""),g=Object(r.a)(f,2),v=g[0],x=g[1],m=a.useState(!1),w=Object(r.a)(m,2),O=w[0],y=w[1],S=a.useState(null),F=Object(r.a)(S,2),k=F[0],P=F[1],C=a.useState(null),R=Object(r.a)(C,2),E=R[0],D=R[1],T=a.useState(!1),M=Object(r.a)(T,2),N=M[0],A=M[1],I=function(){if(!O&&u)return"FOLDER"!==u.type||!!v},U=function(){I()&&u&&(P(null),y(!0),e.onSave({selectedFileOrFolder:u,newFileName:v}).catch((function(e){P(e),y(!1)})))},W=function(){return!O};return N?null:Object(p.jsx)(i.b,{title:Object(p.jsx)(o.Trans,{id:"Save on Google Drive"}),actions:[Object(p.jsx)(c.a,{label:Object(p.jsx)(o.Trans,{id:"Cancel"}),primary:!1,disabled:!W(),onClick:e.onCancel},"cancel"),Object(p.jsx)(h.a,{isLoading:O,children:Object(p.jsx)(i.a,{label:Object(p.jsx)(o.Trans,{id:"Save"}),primary:!0,disabled:!I(),onClick:U})},"save")],cannotBeDismissed:O,onRequestClose:function(){W()&&e.onCancel()},onApply:U,open:!0,maxWidth:"sm",children:Object(p.jsxs)(s.a,{noMargin:!0,children:[Object(p.jsx)(s.c,{children:Object(p.jsx)(b,{floatingLabelText:Object(p.jsx)(o.Trans,{id:"Google Drive folder or existing file to overwrite"}),value:u,onOpenPicker:function(){A(!0),D(null),e.onShowFilePicker({selectFolderEnabled:!0,showUploadView:!1}).then((function(e){l(e),A(!1)})).catch((function(e){D(e),A(!1)}))}})}),Object(p.jsx)(s.c,{children:u&&"FOLDER"===u.type?Object(p.jsx)(d.b,{floatingLabelText:Object(p.jsx)(o.Trans,{id:"New file name"}),floatingLabelFixed:!0,type:"text",translatableHintText:{id:"YourGame.json"},value:v,onChange:function(e,t){return x(t)},fullWidth:!0}):null}),k&&Object(p.jsx)(s.c,{children:Object(p.jsx)(j.a,{kind:"error",children:"There was an error when saving your game. Verify that you have the rights on the folder or file that you selected and try again."})}),E&&Object(p.jsx)(s.c,{children:Object(p.jsx)(j.a,{kind:"error",children:"There was an error when selecting a file or folder from Google Drive. Try again later or verify that you are properly connected to Google Drive."})})]})})}},446:function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return at}));var r,o,a=n(4),i=n(1),c=n.n(i),s=n(985),u=n(35),l=n(1288),d=n(1270),p=(n(104),n(222),n(18)),f=n(3),b=n(30),h=n(0),j=n.n(h),g=n(12),v=n(953),x=n(1292),m=n(146),w=n.n(m),O=n(23),y=n(79),S=n(137),F=n(482),k=n(741),P=n(62),C=n.n(P),R=n(478),E=n(428),D=n(483),T=n(573),M=n(61),N=n(562),A=n(6),I={fileInput:{}},U={audio:"audio/aac,audio/x-wav,audio/mpeg,audio/mp3,audio/ogg",image:"image/jpeg,image/png,image/webp",font:"font/ttf,font/otf",video:"video/mp4,video/webm",json:"application/json",bitmapFont:".fnt,.xml"},W=function(e){var t=e.options,n=e.fileMetadata,r=e.getStorageProvider,o=e.onChooseResources,a=e.createNewResource,i=c.a.useRef(null),s=c.a.useContext(D.a),u=c.a.useState(!1),l=Object(b.a)(u,2),d=l[0],p=l[1],h=c.a.useState([]),v=Object(b.a)(h,2),x=v[0],m=v[1],w=x.length>0,F=c.a.useMemo(r,[r]),k=n?n.fileIdentifier:null,P=c.a.useState(0),C=Object(b.a)(P,2),W=C[0],L=C[1],B=c.a.useCallback(Object(f.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.current){e.next=3;break}return e.abrupt("return");case 3:if(k){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,p(!0),L(0),e.next=10,Object(T.n)(s,k,x,(function(e,t){L(e/t*100)}));case 10:if(t=e.sent,n=t.filter((function(e){return!!e.error})),r=t.filter((function(e){return!!e.url})),!n.length){e.next=17;break}throw n[0];case 17:r.length&&o(r.map((function(e){var t=e.url,n=e.resourceFile,r=a();return r.setFile(t||""),r.setName(n.name),r.setOrigin("cloud-project-resource",t||""),r})));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),Object(M.a)({message:"There was an error while uploading some resources. Verify your internet connection or try again later.",rawError:e.t0,errorId:"upload-cloud-project-resource-error",doNotReport:!0});case 23:return e.prev=23,p(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[5,20,23,26]])}))),[x,s,o,a,k]),z=x.map((function(e){return e.size>T.b?{filename:e.name,error:"too-large"}:null})).filter(Boolean),G="Cloud"===F.internalName&&!!n,_=!!s.authenticated,J=!d&&_&&G,H=!d&&J&&w&&0===z.length;return Object(A.jsxs)(y.a,{noMargin:!0,children:[_?G?null:Object(A.jsx)(R.a,{kind:"warning",children:Object(A.jsx)(g.Trans,{id:"Your need to first save your game on GDevelop Cloud to upload your own resources."})}):Object(A.jsx)(R.a,{kind:"warning",children:Object(A.jsx)(g.Trans,{id:"Your need to first create your account, or login, to upload your own resources."})}),Object(A.jsx)(E.a,{variant:"outlined",children:Object(A.jsx)(O.c,{expand:!0,children:Object(A.jsx)(O.a,{expand:!0,children:Object(A.jsx)("input",{accept:U[t.resourceKind],style:I.fileInput,multiple:t.multiSelection,type:"file",ref:i,disabled:!J,onChange:function(e){for(var t=[],n=0;n<e.currentTarget.files.length;n++)t.push(e.currentTarget.files[n]);m(t)}})})})}),z.map((function(e){return"too-large"===e.error?Object(A.jsx)(R.a,{kind:"error",children:Object(A.jsx)(g.Trans,{id:"The file {0} is too large. Use files that are smaller for your game: each must be less than {1} MB.",values:{0:e.filename,1:T.b/1e3/1e3}})}):Object(A.jsx)(R.a,{kind:"error",children:Object(A.jsx)(g.Trans,{id:"The file {0} is invalid.",values:{0:e.filename}})})})),Object(A.jsxs)(y.b,{alignItems:"center",justifyContent:"flex-end",expand:!0,children:[d?Object(A.jsx)(N.a,{expand:!0,value:W,variant:"determinate"}):null,Object(A.jsx)(S.a,{onClick:B,disabled:!H,primary:!0,label:t.multiSelection?Object(A.jsx)(g.Trans,{id:"Add selected file(s)"}):Object(A.jsx)(g.Trans,{id:"Add selected file"})})]})]})},L=function(e){var t=e.options,n=e.onChooseResources,r=e.createNewResource;return Object(A.jsx)(x.a,{onChoose:function(e){var t=e.url,o=r();o.setFile(t),o.setName(w.a.basename(t)),o.setOrigin("gdevelop-asset-store",t),n([o])},resourceKind:t.resourceKind})},B=function(e){var t=e.options,n=e.onChooseResources,r=e.createNewResource,o=i.useState(""),a=Object(b.a)(o,2),c=a[0],s=a[1],u=i.useState(null),l=Object(b.a)(u,2),d=l[0],p=l[1],h=i.useState([]),v=Object(b.a)(h,2),x=v[0],m=v[1],P=!!x.filter(Boolean).length,E=Object(k.a)(function(){var e=Object(f.a)(j.a.mark((function e(n){var r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.multiSelection?n.split("\n").filter(Boolean):[n],p(null),m([]),e.prev=3,e.next=6,Promise.all(r.map(function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get(t,{timeout:1e3,validateStatus:function(e){return!0}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:o=e.sent,m(o.map((function(e){return!(e.status>=200&&e.status<400)}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),p(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),500);return i.useEffect((function(){E(c)}),[c,E]),Object(A.jsxs)(y.a,{noMargin:!0,expand:!0,children:[Object(A.jsx)(O.c,{noMargin:!0,children:Object(A.jsx)(y.d,{renderButton:function(e){return Object(A.jsx)(S.a,{onClick:function(){var e=t.multiSelection?c.split("\n").filter(Boolean):[c];n(e.map((function(e){var t=r();return t.setFile(e),t.setName(w.a.basename(e)),t.setOrigin("url",e),t})))},primary:!0,label:Object(A.jsx)(g.Trans,{id:"Choose"}),style:e,disabled:!!d||P})},renderTextField:function(){return Object(A.jsx)(F.a,{floatingLabelText:t.multiSelection?Object(A.jsx)(g.Trans,{id:"Resource(s) URL(s) (one per line)"}):Object(A.jsx)(g.Trans,{id:"Resource URL"}),value:c,onChange:s,multiline:t.multiSelection,rows:1,rowsMax:5,fullWidth:!0,errorText:d?Object(A.jsx)(g.Trans,{id:"There was an error verifying the URL(s). Please check they are correct."}):P?Object(A.jsx)(g.Trans,{id:"Unable to verify URLs {0} . Please check they are correct.",values:{0:x.map((function(e,t){return e?"#"+(t+1):null})).filter(Boolean).join(", ")}}):null})}})}),Object(A.jsx)(R.a,{kind:"warning",children:Object(A.jsx)(g.Trans,{id:"The URLs must be public and stay accessible while you work on this project - they won't be stored inside the project file. When exporting a game, the resources pointed by these URLs will be downloaded and stored inside the game."})})]})},z=[].concat(Object(p.a)(v.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"resource-store-".concat(t),displayName:{id:"Choose from asset store"},displayTab:"standalone",kind:t,renderComponent:function(e){return Object(A.jsx)(L,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options},"resource-store-".concat(t))}}}))),Object(p.a)(v.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"upload-".concat(t),displayName:{id:"File(s) from your device"},displayTab:"import",kind:t,renderComponent:function(e){return Object(A.jsx)(W,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options,fileMetadata:e.fileMetadata,getStorageProvider:e.getStorageProvider},"url-chooser-".concat(t))}}}))),Object(p.a)(v.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"url-chooser-".concat(t),displayName:{id:"Use a public URL"},displayTab:"import-advanced",kind:t,renderComponent:function(e){return Object(A.jsx)(B,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options},"url-chooser-".concat(t))}}})))),G=n(80),_=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:function(){Object(G.n)("piskel"),u.b.showMessageBox("This feature is only supported in the desktop version for now!\nDownload it from GDevelop website.")}},{name:"jfxr-app",displayName:"Edit with Jfxr",kind:"audio",edit:function(){Object(G.n)("jfxr"),u.b.showMessageBox("This feature is only supported in the desktop version for now!\nDownload it from GDevelop website.")}},{name:"yarn-app",displayName:"Edit with Yarn",kind:"json",edit:function(){Object(G.n)("yarn"),u.b.showMessageBox("This feature is only supported in the desktop version for now!\nDownload it from GDevelop website.")}}],J=n(1278),H=n(2229),V=n(2230),K=n(2231),Y=n(2232),q=n(2233),X=n(2234),Q=n(2235),Z=n(797),$=n(806),ee=n(804),te=n(800),ne=n(801),re=n(802),oe=n(798),ae=Object(a.a)(Object(a.a)({},$.c),{},{exportPipeline:K.a}),ie=[Object(a.a)(Object(a.a)({},ee.c),{},{exportPipeline:Y.a}),Object(a.a)(Object(a.a)({},ne.b),{},{exportPipeline:H.a}),Object(a.a)(Object(a.a)({},re.b),{},{exportPipeline:V.a}),Object(a.a)(Object(a.a)({},te.c),{},{exportPipeline:Q.a})],ce=[Object(a.a)(Object(a.a)({},ee.c),{},{exportPipeline:Y.a}),Object(a.a)(Object(a.a)({},Z.c),{},{exportPipeline:q.a}),Object(a.a)(Object(a.a)({},oe.c),{},{exportPipeline:X.a})],se=n(2236),ue=n(708),le=n(530),de=n(961),pe=n(853),fe=n(765),be=n.n(fe),he=function(e){var t=e.onWriteFile,n=Object(pe.a)(),r=function(e){return"".concat(n,"/").concat(be()(e),".js")};return{getIncludeFileFor:function(e){return Object(de.a)()+r(e)},writeFunctionCode:function(e,n){var o=r(e);return t({includeFile:o,content:n}),console.log("Uploading function generated code to ".concat(o,"...")),Object(de.b)({Key:r(e),Body:n,ContentType:"text/javascript"})},writeBehaviorCode:function(e,n){var o=r(e);return t({includeFile:o,content:n}),console.log("Uploading behavior generated code to ".concat(o,"...")),Object(de.b)({Key:r(e),Body:n,ContentType:"text/javascript"})}}},je=n(1283),ge=n(1275),ve=n(620),xe=n(965),me=n(2268),we=n(2269),Oe=n.n(we),ye={internalName:"DownloadFile",name:{id:"Download a copy"},renderIcon:function(e){return Object(A.jsx)(Oe.a,{fontSize:e.size})},hiddenInOpenDialog:!0,createOperations:function(e){var t=e.setDialog,n=e.closeDialog;return{onSaveProjectAs:function(){var e=Object(f.a)(j.a.mark((function e(r,o,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a&&a.onStartSaving&&a.onStartSaving(),e.next=3,a.onMoveResources();case 3:return e.abrupt("return",new Promise((function(e){t((function(){return Object(A.jsx)(me.a,{onDone:function(){n(),e({wasSaved:!1})},project:r})}))})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}},Se=n(497),Fe=n(963),ke=n(99),Pe=n(136),Ce=n(471),Re=function(e){var t=i.useState(e.nameSuggestion),n=Object(b.a)(t,2),r=n[0],o=n[1],a=i.useState(null),c=Object(b.a)(a,2),s=c[0],u=c[1],l=function(t){u(null),r?e.onSave(r):u(t._({id:"Project name cannot be empty."}))};return Object(A.jsx)(g.I18n,{children:function(t){var n=t.i18n;return Object(A.jsx)(ke.b,{onApply:function(){return l(n)},actions:[Object(A.jsx)(Pe.a,{label:Object(A.jsx)(g.Trans,{id:"Cancel"}),primary:!1,onClick:e.onCancel},"cancel"),Object(A.jsx)(ke.a,{label:Object(A.jsx)(g.Trans,{id:"Save"}),primary:!0,onClick:function(){return l(n)}},"save")],open:!0,onRequestClose:e.onCancel,maxWidth:"sm",title:Object(A.jsx)(g.Trans,{id:"Choose a name for your new project"}),flexBody:!0,children:Object(A.jsx)(Ce.b,{autoFocus:!0,fullWidth:!0,maxLength:T.a,errorText:s,translatableHintText:{id:"Project name"},type:"text",value:r,onChange:function(e,t){o(t)}})})}})},Ee=function(){var e=Object(f.a)(j.a.mark((function e(t){var n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Fe.a)();case 2:return n=e.sent,r=Object(Se.a)(t),o=new n.TextReader(r),e.abrupt("return",new Promise((function(e,t){n.createWriter(new n.BlobWriter("application/zip"),(function(t){t.add("game.json",o,(function(){t.close((function(t){e(t)}))}))}),(function(e){console.error("An error occurred when zipping project",e),t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(f.a)(j.a.mark((function e(t){var n,r,o,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.authenticatedUser,r=t.project,o=t.cloudProjectId,e.next=3,Ee(r);case 3:return a=e.sent,e.next=6,Object(T.d)(n,o,a);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(e){return function(){var t=Object(f.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,De({authenticatedUser:e,project:n,cloudProjectId:r.fileIdentifier});case 2:if(t.sent){t.next=5;break}return t.abrupt("return",{wasSaved:!1,fileMetadata:r});case 5:return t.abrupt("return",{wasSaved:!0,fileMetadata:r});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Me=function(e){return function(){var t=Object(f.a)(j.a.mark((function t(n,r,o){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.authenticated){t.next=2;break}return t.abrupt("return",!1);case 2:return t.prev=2,t.next=5,Object(T.m)(e,r.fileIdentifier,o);case 5:return t.next=7,De({authenticatedUser:e,project:n,cloudProjectId:r.fileIdentifier});case 7:if(t.sent){t.next=10;break}throw new Error("Couldn't save project following property update.");case 10:return t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t.catch(2),console.warn("An error occurred while changing cloud project name. Ignoring.",t.t0),t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,n,r){return t.apply(this,arguments)}}()},Ne=function(e){return e.response&&e.response.data&&"project-creation/too-many-projects"===e.response.data.code?{id:"You've reached the limit of cloud projects you can have. Delete some existing cloud projects of yours before trying again."}:{id:"An error occurred when saving the project, please verify your internet connection or try again later."}},Ae=function(e,t,n){return function(){var r=Object(f.a)(j.a.mark((function r(o,a){var i,c;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.authenticated){r.next=2;break}return r.abrupt("return",{fileMetadata:null});case 2:return r.next=4,new Promise((function(e){t((function(){return Object(A.jsx)(Re,{onCancel:function(){n(),e(null)},nameSuggestion:o.getName(),onSave:function(t){n(),e(t)}})}))}));case 4:if(i=r.sent){r.next=7;break}return r.abrupt("return",{fileMetadata:null});case 7:return r.next=9,Object(T.e)(e,{name:i});case 9:if(c=r.sent){r.next=12;break}throw new Error("No cloud project was returned from creation api call.");case 12:return r.abrupt("return",{fileMetadata:{fileIdentifier:c.id}});case 13:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},Ie=function(e,t,n){return function(){var t=Object(f.a)(j.a.mark((function t(n,r,o){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:if(e.authenticated){t.next=4;break}return t.abrupt("return",{wasSaved:!1});case 4:return o&&o.onStartSaving&&o.onStartSaving(),t.prev=5,t.next=8,o.onMoveResources();case 8:return a=r.fileIdentifier,t.next=11,Object(T.j)(e,a);case 11:return t.next=13,De({authenticatedUser:e,project:n,cloudProjectId:a});case 13:if(t.sent){t.next=16;break}throw new Error("No version id was returned from committing api call.");case 16:return t.abrupt("return",{wasSaved:!0});case 19:throw t.prev=19,t.t0=t.catch(5),console.error("An error occurred while creating a cloud project",t.t0),t.t0;case 23:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e,n,r){return t.apply(this,arguments)}}()},Ue=function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Fe.a)();case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,r){n.createReader(new n.BlobReader(t),(function(t){t.getEntries((function(t){t[0].getData(new n.TextWriter,(function(t){e(t)}))}))}),(function(e){console.error("An error occurred when unzipping archived project",e),r(e)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(e){return function(){var t=Object(f.a)(j.a.mark((function t(n,r){var o,a,i,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.fileIdentifier,r&&r(25,{id:"Calibrating sensors"}),t.next=4,Object(T.i)(e,o);case 4:if(a=t.sent){t.next=7;break}throw new Error("Cloud project couldn't be fetched.");case 7:return r&&r(50,{id:"Starting engine"}),t.next=10,Object(T.j)(e,o);case 10:return r&&r(75,{id:"Checking tools"}),t.next=13,Object(T.k)(a);case 13:return i=t.sent,r&&r(100,{id:"Opening portal"}),t.next=17,Ue(i);case 17:return c=t.sent,t.abrupt("return",{content:JSON.parse(c)});case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Le=function(e){return function(){var t=Object(f.a)(j.a.mark((function t(n,r,o){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.fileIdentifier,t.next=3,Object(T.j)(e,a);case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},Be=n(1276),ze={internalName:"Cloud",name:{id:"GDevelop Cloud"},renderIcon:function(e){return Object(A.jsx)(Be.a,{fontSize:e.size})},hiddenInOpenDialog:!0,needUserAuthentication:!0,getFileMetadataFromAppArguments:function(e){if(!e[u.a])return null;if(!e[u.a].length)return null;var t,n=e[u.a][0];return(t=n).startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://")||t.startsWith("blob:")||t.startsWith("data:")?null:{fileIdentifier:n}},createOperations:function(e){var t=e.setDialog,n=e.closeDialog,r=e.authenticatedUser;return{onOpen:We(r),onEnsureCanAccessResources:Le(r),onSaveProject:Te(r),onChooseSaveProjectAsLocation:Ae(r,t,n),onSaveProjectAs:Ie(r),onChangeProjectProperty:Me(r),getOpenErrorMessage:function(e){return{id:"An error occurred when opening the project. Check that your internet connection is working and that your browser allows the use of cookies."}},getWriteErrorMessage:Ne}}},Ge=n(2270),_e=n(2),Je=n(651),He=n(964),Ve=function(e){return e.startsWith("blob:")},Ke=function(){var e=Object(f.a)(j.a.mark((function e(t){var n,r,o,a,i,c,s,u,l,d,p,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.authenticatedUser,o=t.oldFileMetadata,a=t.newFileMetadata,t.oldStorageProvider,i=t.oldStorageProviderOperations,t.newStorageProvider,t.newStorageProviderOperations,c=t.onProgress,s={erroredResources:[]},u=a.fileIdentifier,l=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().map((function(e){var n,r=t.getResource(e),o=r.getFile();return(n=o).startsWith("http://")||n.startsWith("https://")||n.startsWith("ftp://")||n.startsWith("blob:")||n.startsWith("data:")?Object(Je.b)(o)?Object(T.h)(o)===u?null:{resource:r,url:o,filename:Object(T.g)(o)}:Ve(o)?(s.erroredResources.push({resourceName:r.getName(),error:new Error("Unsupported blob URL.")}),null):null:(s.erroredResources.push({resourceName:r.getName(),error:new Error("Unsupported relative file.")}),null)})).filter(Boolean)},d=l(n),i.onEnsureCanAccessResources&&i.onEnsureCanAccessResources(n,o),e.next=8,Object(He.a)({urlContainers:d,onProgress:function(e,t){c(e,2*t)}});case 8:return p=e.sent,f=p.map((function(e){var t=e.item,n=e.blob,r=e.error;return r||!n?(s.erroredResources.push({resourceName:t.resource.getName(),error:r||new Error("Unknown error during download.")}),null):{resource:t.resource,file:new File([n],t.filename,{type:n.type})}})).filter(Boolean),e.next=12,Object(T.j)(r,u);case 12:return e.next=14,Object(T.n)(r,u,f.map((function(e){return e.file})),(function(e,t){c(t+e,2*t)}));case 14:return e.sent.forEach((function(e,t){var n=e.url,r=e.error,o=f[t].resource;!r&&n?o.setFile(n):s.erroredResources.push({resourceName:o.getName(),error:r||new Error("Unknown error during upload.")})})),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(e){return e.startsWith("blob:")},qe=function(){var e=Object(f.a)(j.a.mark((function e(t){var n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r={erroredResources:[]},o=n.getResourcesManager(),o.getAllResourceNames().toJSArray().forEach((function(e){var t,n=o.getResource(e),a=n.getFile();if((t=a).startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://")||t.startsWith("blob:")||t.startsWith("data:"))return Object(Je.b)(a)?void r.erroredResources.push({resourceName:n.getName(),error:new Error("Resources uploaded to GDevelop Cloud are not supported on Google Drive.")}):Ye(a)?void r.erroredResources.push({resourceName:n.getName(),error:new Error("Resources with Blob URLs are not supported.")}):void 0;r.erroredResources.push({resourceName:n.getName(),error:new Error("Relative files in resources are not supported.")})})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{erroredResources:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=(r={},Object(_e.a)(r,"".concat(ze.internalName,"=>").concat(ze.internalName),Ke),Object(_e.a)(r,"".concat(ve.a.internalName,"=>").concat(ze.internalName),Xe),Object(_e.a)(r,"".concat(xe.a.internalName,"=>").concat(ze.internalName),Xe),Object(_e.a)(r,"".concat(ze.internalName,"=>").concat(xe.a.internalName),qe),Object(_e.a)(r,"".concat(ve.a.internalName,"=>").concat(xe.a.internalName),Xe),Object(_e.a)(r,"".concat(xe.a.internalName,"=>").concat(xe.a.internalName),Xe),Object(_e.a)(r,"".concat(ze.internalName,"=>").concat(ye.internalName),Xe),Object(_e.a)(r,"".concat(ve.a.internalName,"=>").concat(ye.internalName),Xe),Object(_e.a)(r,"".concat(xe.a.internalName,"=>").concat(ye.internalName),Xe),r),Ze={moveAllProjectResources:function(){var e=Object(f.a)(j.a.mark((function e(t){var n,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldStorageProvider,r=t.newStorageProvider,o=Qe["".concat(n.internalName,"=>").concat(r.internalName)]){e.next=4;break}throw new Error("Can't find a ResourceMover for ".concat(n.internalName," to ").concat(r.internalName,"."));case 4:return e.abrupt("return",o(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},$e=Ze,et=n(1277),tt=function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{erroredResources:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=(o={},Object(_e.a)(o,ze.internalName,tt),Object(_e.a)(o,xe.a.internalName,tt),Object(_e.a)(o,ve.a.internalName,et.a),o),rt={fetchAllProjectResources:function(){var e=Object(f.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.storageProvider,r=nt[n.internalName]){e.next=4;break}throw new Error("Can't find a ResourceFetcher for ".concat(n.internalName," - have you registered the storage provider here?"));case 4:return e.abrupt("return",r(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ot=rt,at=function(e){u.b.setUpContextMenu();var t=u.b.getArguments();return Object(A.jsx)(je.a,{authentication:e,disableCheckForUpdates:!!t["disable-update-check"],makeEventsFunctionCodeWriter:he,eventsFunctionsExtensionWriter:null,eventsFunctionsExtensionOpener:null,children:function(e){var n=e.i18n;return Object(A.jsx)(ge.a,{appArguments:t,storageProviders:[ve.a,ze,xe.a,ye],defaultStorageProvider:ve.a,children:function(e){var r=e.getStorageProviderOperations,o=e.storageProviders,i=e.initialFileMetadataToOpen,c=e.getStorageProvider;return Object(A.jsx)(s.a,{i18n:n,renderPreviewLauncher:function(e,t){return Object(A.jsx)(J.a,Object(a.a)(Object(a.a)({},e),{},{ref:t}))},initialDialog:t["initial-dialog"],renderExportDialog:function(e){return Object(A.jsx)(l.a,{project:e.project,onSaveProject:e.onSaveProject,onChangeSubscription:e.onChangeSubscription,onClose:e.onClose,automatedExporters:ie,manualExporters:ce,onlineWebExporter:ae,allExportersRequireOnline:!0})},renderCreateDialog:function(e){return Object(A.jsx)(d.a,{open:e.open,onClose:e.onClose,initialExampleShortHeader:e.initialExampleShortHeader,isProjectOpening:e.isProjectOpening,onOpenProjectPreCreationDialog:e.onOpenProjectPreCreationDialog})},storageProviders:o,resourceMover:$e,resourceFetcher:ot,onCreateFromExampleShortHeader:Ge.b,onCreateBlank:Ge.a,getStorageProviderOperations:r,getStorageProvider:c,resourceSources:z,resourceExternalEditors:_,extensionsLoader:Object(se.a)({objectsEditorService:ue.a,objectsRenderingService:le.a,filterExamples:!u.b.isDev()}),initialFileMetadataToOpen:i})}})}})}},588:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(54),o={preview:["/Runtime/index.html"],web:["/Runtime/index.html"],"cocos2d-js":["/Runtime/Cocos2d/cocos2d-js-v3.10.js","/Runtime/Cocos2d/index.html","/Runtime/Cocos2d/main.js","/Runtime/Cocos2d/project.json"],"facebook-instant-games":["/Runtime/FacebookInstantGames/fbapp-config.json","/Runtime/FacebookInstantGames/index.html"],cordova:["/Runtime/Cordova/www/index.html","/Runtime/Cordova/config.xml","/Runtime/Cordova/package.json"],electron:["/Runtime/index.html","/Runtime/Electron/main.js","/Runtime/Electron/package.json"]},a=function(e){var t="https://resources.gdevelop-app.com/GDJS-".concat(Object(r.b)());return Promise.all(o[e].map((function(e){var n=t+e;return fetch(n).then((function(e){if(!e.ok)throw console.error('Error while downloading "'.concat(n,'"'),e),new Error('Error while downloading "'.concat(n,'" (status: ').concat(e.status,")"));return e.text().then((function(e){return{filePath:n,text:e}}))}))}))).then((function(e){return{gdjsRoot:t,filesContent:e}}))}},589:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));var r=n(3),o=n(0),a=n.n(o),i=n(963),c=n(964),s=n(146),u=n.n(s),l=n(787);function d(e,t,n){if(e.length){var r=0;!function o(){t(e[r],(function(){++r>=e.length?n():o()}))}()}else n()}var p=function(){var e=Object(r.a)(a.a.mark((function e(t){var n,r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,r=t.onProgress,e.next=3,Object(c.a)({urlContainers:n.filter((function(e){return-1===e.url.indexOf(".h")})),onProgress:r});case 3:if(o=e.sent,!(i=o.filter((function(e){return!!e.error||!e.blob}))).length){e.next=8;break}throw s=i.map((function(e){var t=e.error;return t?t.message:"Unknown error during download."})).filter(Boolean).join(",\n"),new Error("Could not download ".concat(i.length," files:\n ").concat(Object(l.a)(s,300)));case 8:return e.abrupt("return",o.map((function(e){var t=e.item;return{blob:e.blob,filePath:t.filePath}})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(r.a)(a.a.mark((function e(t){var n,r,o,c,s,l,p,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.textFiles,r=t.blobFiles,o=t.basePath,c=t.onProgress,s=t.sizeLimit,e.next=3,Object(i.a)();case 3:return l=e.sent,p=0,f=r.length+n.length,e.abrupt("return",new Promise((function(e,t){l.createWriter(new l.BlobWriter("application/zip"),(function(a){d(r,(function(e,t){var n=e.filePath,r=e.blob,i=u.a.relative(o,n);a.add(i,new l.BlobReader(r),(function(){p++,c(p,f),t()}),(function(){}))}),(function(){d(n,(function(e,t){var n=e.filePath,r=e.text,i=u.a.relative(o,n);a.add(i,new l.TextReader(r),(function(){p++,c(p,f),t()}),(function(){}))}),(function(){a.close((function(n){var r=n.size;if(s&&r>s){var o=Math.round(r/1e6);t(new Error("Archive is of size ".concat(o," MB, which is above the limit allowed of ").concat(s/1e6," MB.")))}e(n)}))}))}))}),(function(e){console.error("Error while making zip:",e),t(e)}))})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},621:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(8),o=n(9),a=n(146),i=n.n(a),c=e.gd,s=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},u=i.a.posix||i.a,l=Object(r.a)((function e(t){var n=this,r=t.textFiles;Object(o.a)(this,e),this._textFiles={},this._filesToDownload={},this.getAllTextFilesIn=function(e){return Object.keys(n._textFiles).filter((function(t){return 0===t.indexOf(e)})).map((function(e){return{filePath:e,text:n._textFiles[e]}}))},this.getAllUrlFilesIn=function(e){return Object.keys(n._filesToDownload).filter((function(t){return 0===t.indexOf(e)})).map((function(e){return{filePath:e,url:n._filesToDownload[e]}}))},this.mkDir=function(e){return!0},this.dirExists=function(e){return!0},this.clearDir=function(e){return Object.keys(n._textFiles).forEach((function(t){0===t.indexOf(e)&&delete n._textFiles[t]})),!0},this.getTempDir=function(){return"/browser-file-system-tmp-dir"},this.fileNameFrom=function(e){return u.basename(e)},this.dirNameFrom=function(e){return u.dirname(e)},this.makeAbsolute=function(e,t){return s(e)?e:(n.isAbsolute(t)||(t=u.resolve(t)),u.resolve(t,u.normalize(e)))},this.makeRelative=function(e,t){return s(e)?0===e.indexOf(t)?e.substring(t.length):(console.warn("".concat(e," cannot be made relative to ").concat(t,", please double check this behavior is correct.")),e):u.relative(t,u.normalize(e))},this.isAbsolute=function(e){return!!s(e)||e.length>0&&"/"===e.charAt(0)},this.copyFile=function(e,t){return s(e)?s(t)?(console.error("Destination can't be a URL in copyFile (from ".concat(e," to ").concat(t,").")),!1):(n._filesToDownload[u.normalize(t)]=e,!0):n._textFiles[e]?(n._textFiles[u.normalize(t)]=n._textFiles[e],!0):(console.error("File not found in copyFile (from ".concat(e," to ").concat(t,").")),!1)},this.writeToFile=function(e,t){return n._textFiles[u.normalize(e)]=t,!0},this.readFile=function(e){return n._textFiles[e]?n._textFiles[e]:(console.error("Unknown file ".concat(e,", returning an empty string")),"")},this.readDir=function(e,t){t=t.toUpperCase();var r=new c.VectorString;return Object.keys(n._filesToDownload).forEach((function(e){var n=e.toUpperCase();n.indexOf(t)===n.length-t.length&&r.push_back(e)})),r},this.fileExists=function(e){if(s(e))return!0;var t=u.normalize(e);return!!n._textFiles[t]||!!n._filesToDownload[t]},r.forEach((function(e){n._textFiles[e.filePath]=e.text}))}))}).call(this,n(29))},709:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(30),o=n(1),a=function(e){var t=e.blob,n=e.children,a=o.useState(""),i=Object(r.a)(a,2),c=i[0],s=i[1],u=o.useState(null),l=Object(r.a)(u,2),d=l[0],p=l[1];return o.useEffect((function(){t&&t!==d&&(s(URL.createObjectURL(t)),p(t))}),[t,d]),o.useEffect((function(){return function(){c&&URL.revokeObjectURL(c)}}),[c]),n(c)},i=function(e,t){var n=document.body;if(n){var r=document.createElement("a");n.appendChild(r),r.style.display="none",r.href=e,r.download=t,r.click(),n.removeChild(r)}}},961:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r=n(62),o=n.n(r),a=n(53),i=n(684),c=function(e){return Object(i.e)({uploadType:"preview",key:e.Key,contentType:e.ContentType}).then((function(t){var n=t.signedUrl;return o.a.put(n,e.Body,{headers:{"Content-Type":e.ContentType}})}))},s=function(){return a.f.baseUrl}},962:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(62),o=n.n(r),a=function(e,t,n){return o.a.put(t.signedUrl,e,{headers:{"Content-Type":t.contentType},maxContentLength:1/0,onUploadProgress:function(e){e&&e.total?n(e.loaded,e.total):n(0,0)}}).then((function(){}))}},963:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(160),o=!1,a=null,i=function(){if(o){var t=e.zip;return Promise.resolve(t)}return a||(a=Object(r.a)("./external/zip.js/WebContent/zip.js").then((function(){var t=e.zip;if(!t)throw new Error('Can not find "zip" in the global namespace after loading zip.js. Has the zip.js script being loaded properly?');return a=null,o=!0,t.workerScripts={deflater:["./external/zip.js/WebContent/z-worker.js","./external/zlib-asm/zlib.js","./external/zip.js/WebContent/zlib-asm/codecs.js"],inflater:["./external/zip.js/WebContent/z-worker.js","./external/zlib-asm/zlib.js","./external/zip.js/WebContent/zlib-asm/codecs.js"]},t})),a)}}).call(this,n(29))},964:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),o=n(0),a=n.n(o),i=n(651),c=n(792),s=n.n(c),u=function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n},l=function(){var e=Object(r.a)(a.a.mark((function e(t){var n,o,c,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlContainers,o=t.onProgress,c=0,e.next=4,s.a.withConcurrency(20).for(n).process(function(){var e=Object(r.a)(a.a.mark((function e(t){var r,s,l,d,p,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,e.prev=1,s=u(r,"gdUsage","export"),e.next=5,fetch(s,{credentials:Object(i.a)(s)?"include":"same-origin"});case 5:if((l=e.sent).ok){e.next=8;break}throw new Error('Error while downloading "'.concat(s,'" (status: ').concat(l.status,")"));case 8:return e.next=10,l.blob();case 10:return d=e.sent,p={item:t,blob:d},e.abrupt("return",p);case 15:return e.prev=15,e.t0=e.catch(1),f={item:t,error:e.t0},e.abrupt("return",f);case 19:return e.prev=19,o(c++,n.length),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(t){return e.apply(this,arguments)}}());case 4:return l=e.sent,d=l.results,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},965:function(e,t,n){"use strict";(function(e){var r=n(3),o=n(4),a=n(0),i=n.n(a),c=(n(1),n(497)),s=n(2267),u=n(2415),l=n(160),d=n(6),p="AIzaSyDJYQmzLCfjXnNImDa1X_cDTWjl2BOrcM4",f=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],b="https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.install",h=!1,j=null,g=function(){return h?Promise.resolve():j||(j=Object(l.a)("https://apis.google.com/js/api:client.js").then((function(){var t=e.gapi;if(!t)throw new Error("No gapi global object found after loading Google Drive API script");return new Promise((function(e,n){t.load("client:auth2:picker",{callback:function(){var n=t.auth2.init({apiKey:p,clientId:"44882707384-3t4tubr3fbht87sbtdp7u5mlo45k5uku.apps.googleusercontent.com",discoveryDocs:f,scope:b});t.client.setApiKey(p);var r=t.client.load("drive","v3");e(Promise.all([n,r]))},onerror:function(){n(new Error("Unable to load auth2 and picker APIs for Google Drive."))}})}))})).then((function(){h=!0,j=null})).catch((function(e){throw console.error("Error while loading Google Drive APIs:",e),j=null,e})))},v=!1,x=function(){return g().then((function(){var t=e.gapi.auth2.getAuthInstance();return v&&t.isSignedIn.get()?t.currentUser.get():(v=!1,t.isSignedIn.listen((function(e){console.info("Authenticated with Google APIs: ",e),v=e})),t.signIn({scope:b}).then((function(e){if(!e.getAuthResponse()||e.getAuthResponse().error)throw console.error("OAuth2 error while sign in:",e.getAuthResponse()?e.getAuthResponse().error:"No AuthResponse"),new Error("Authentication error");return v=!0,e})))}))},m=function(e,t,n){return fetch("https://www.googleapis.com/upload/drive/v3/files/".concat(e),{method:"PATCH",headers:new Headers({Authorization:"Bearer ".concat(t.getAuthResponse().access_token),"Content-Type":"application/json"}),body:n}).then((function(e){if(200!==e.status)throw 401===e.status&&(v=!1),e}))},w=function(t){var n=t.selectFolderEnabled,r=t.showUploadView;return x().then((function(t){var o=e.google;return new Promise((function(e){var a=null,i=(new o.picker.PickerBuilder).addView((new o.picker.DocsView).setIncludeFolders(!0).setSelectFolderEnabled(n)).setOAuthToken(t.getAuthResponse().access_token).setDeveloperKey(p).setAppId("44882707384").setCallback((function(t){if(t[o.picker.Response.ACTION]===o.picker.Action.PICKED){var n=t[o.picker.Response.DOCUMENTS][0],r=n[o.picker.Document.ID],i=n[o.picker.Document.NAME],c=n[o.picker.Document.PARENT_ID];n[o.picker.Document.TYPE]===o.picker.Type.LOCATION||"application/vnd.google-apps.folder"===n[o.picker.Document.MIME_TYPE]?e({id:r,name:i,type:"FOLDER"}):e({id:r,name:i,type:"FILE",parentId:c}),a&&a.dispose()}else t[o.picker.Response.ACTION]===o.picker.Action.CANCEL&&(e(null),a&&a.dispose())}));r&&i.addView((new o.picker.DocsUploadView).setIncludeFolders(!0)),(a=i.build()).setVisible(!0);for(var c=document.getElementsByClassName("picker-dialog"),s=0;s<c.length;++s)c[s].style.zIndex="5000"}))}))};t.a={internalName:"GoogleDrive",name:{id:"Google Drive"},renderIcon:function(e){return Object(d.jsx)(s.a,{fontSize:e.size})},getFileMetadataFromAppArguments:function(e){if(e.state)try{var t=JSON.parse(e.state);if(t.ids&&t.ids[0])return{fileIdentifier:t.ids[0]}}catch(n){console.warn("Error while trying to parse the Google Drive 'ids' in 'state' from the app arguments.")}return null},createOperations:function(t){var n=t.setDialog,a=t.closeDialog;return g().catch((function(){})),{doesInitialOpenRequireUserInteraction:!0,onOpen:function(e){var t=e.fileIdentifier;return x().then((function(e){return fetch("https://www.googleapis.com/drive/v3/files/".concat(t,"?alt=media"),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(e.getAuthResponse().access_token)})})})).then((function(e){return e.text().then((function(e){return new Promise((function(n,r){try{return n({content:JSON.parse(e)})}catch(o){return r(t+" is a corrupted/malformed file.")}}))}),(function(e){throw console.error("Error while reading the file from Google Drive API: ",e),e}))}),(function(e){throw console.error("Error while fetching the file from Google Drive API: ",e),e}))},onOpenWithPicker:function(){return x().then((function(e){return w({selectFolderEnabled:!1,showUploadView:!0})})).then((function(e){return e?{fileIdentifier:e.id}:null}))},onSaveProject:function(e,t){var n=t.fileIdentifier,r=Object(o.a)(Object(o.a)({},t),{},{lastModifiedDate:Date.now()}),a=Object(c.a)(e);return x().then((function(e){return m(n,e,a)})).then((function(){return{wasSaved:!0,fileMetadata:r}}))},onChooseSaveProjectAsLocation:function(t,o){return new Promise((function(t){n((function(){return Object(d.jsx)(u.a,{onShowFilePicker:w,onCancel:function(){a(),t({fileMetadata:null})},onSave:function(){var n=Object(r.a)(i.a.mark((function n(r){var o,a,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.selectedFileOrFolder,a=r.newFileName,n.next=3,x();case 3:if("FOLDER"!==o.type){n.next=10;break}return n.next=6,i=o.id,s=a,e.gapi.client.drive.files.create({"content-type":"application/json",uploadType:"multipart",name:s,parents:[i],mimeType:"application/json",fields:"id, name, kind, size"}).then((function(e){return e.result.id}));case 6:c=n.sent,t({fileMetadata:{fileIdentifier:c}}),n.next=11;break;case 10:t({fileMetadata:{fileIdentifier:o.id}});case 11:case"end":return n.stop()}var i,s}),n)})));return function(e){return n.apply(this,arguments)}}()})}))}))},onSaveProjectAs:function(){var e=Object(r.a)(i.a.mark((function e(t,n,r){var o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:return o=Object(c.a)(t),r&&r.onStartSaving&&r.onStartSaving(),e.next=6,x();case 6:return s=e.sent,e.next=9,r.onMoveResources();case 9:return e.next=11,m(n.fileIdentifier,s,o);case 11:return a(),e.abrupt("return",{wasSaved:!0});case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getOpenErrorMessage:function(e){return h?{id:"Check that you don't have any blocked popup (if so, allow them and retry) and that you have the authorization for reading the file you're trying to access."}:{id:"Google Drive could not be loaded. Check that you are not offline and have a proper internet connection, then try again."}}}}}}).call(this,n(29))}}]);
//# sourceMappingURL=browser-app.680d3358.chunk.js.map